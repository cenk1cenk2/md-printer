<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Invoice</title>
</head>

<body>
  <img src="https://main.s3.kilic.dev/html/icon.png" alt="logo"
    class="absolute h-48 top-0 left-1/2 transform -translate-x-1/2">
  <div class="max-w-full leading-tight prose grid grid-rows">
    <section id="header" class="grid grid-cols-12">
      <div class="col-span-1 flex flex-col justify-center text-lg font-extrabold text-gray-300">
        <p class="text-vertical">FROM</p>
      </div>
      <div class="col-start-2 col-span-5 flex flex-col justify-baseline p-4">
        <h1>Cenk Kılıç</h1>
        <h3>{{ company.tax_number }}</h3>
        <address>{{ company.address }}</address>
        <div class="flex flex-col text-sm">
          <a href="tel:{{ company.phone }}">{{ company.phone }}</a>
          <a href="mailto:{{ company.email }}">{{ company.email }}</a>
          <a href="{{ company.website }}">{{ company.website }}</a>
        </div>
      </div>
      <div class="col-span-6 bg-gray-900 rounded-bl-4xl flex flex-col justify-center text-center">
        <p class="p-4 font-bold text-white shadow-2xl text-6xl">Invoice</p>
      </div>
    </section>
    <section id="client" class="grid grid-cols-12">
      <div class="col-span-1 flex flex-col justify-center text-lg font-extrabold text-gray-300">
        <p class="text-vertical">TO</p>
      </div>
      <div class="col-span-7 flex flex-col justify-baseline p-4">
        <h2>{{ client.name }}</h2>
        <h3>{{ client.tax_number }}</h3>
        <address>{{ company.address }}</address>
      </div>
      <div
        class="col-span-4 flex justify-center bg-gray-900 rounded-bl-4xl my-[-1px] py-1 text-white text-xs text-center">
        <div class="col-span-3 grid grid-rows-2 p-4 gap-4">
          <div class="p-2 flex flex-col bg-gray-700 rounded-xl">
            <p class="font-bold">Invoice #</p>
            <p class="font-semibold">{{ id }}</p>
          </div>
          <div class="p-2 flex flex-col bg-gray-700 rounded-xl">
            <p class="font-bold">Date</p>
            <p class="font-semibold">{{ date }}</p>
          </div>
        </div>
      </div>
    </section>
    <section id="items" class="grid grid-cols-12">
      <div class="col-span-1 flex flex-col justify-center text-lg font-extrabold text-gray-300">
        <p class="text-vertical">ITEMS</p>
      </div>
      <div class="col-start-2 col-span-9 p-4 mt-1">
        <table class="w-full table-auto border-2 rounded-xl">
          <thead class="border-b-2 text-lg">
            <tr>
              <th scope="col" class="w-full">
                Description
              </th>
              <th scope="col" class="w-24">
                Unit
              </th>
              <th scope="col" class="w-24">
                Price
              </th>
              <th scope="col" class="w-24">
                Total
              </th>
            </tr>
          </thead>
          <tbody>
            {% set calculated_subtotal = 0 %}
            {% for item in items %}
            <tr>
              <td class="text-left">{{ item.description }}</td>
              <td class="text-center">{{ item.quantity }} {{ item.type }}</td>
              <td class="text-center">{{ item.price }}{{ currency }}</td>
              <td class="font-semibold text-center">{{ item.quantity * item.price }}{{ currency }}</td>
            </tr>
            {% set calculated_subtotal = calculated_subtotal + item.quantity * item.price %}
            {% endfor %}
          </tbody>
        </table>
      </div>
      <div class="col-span-2 bg-gray-900 rounded-bl-4xl flex flex-row justify-center text-white">
      </div>
    </section>
    <section id="payment" class="grid grid-cols-12">
      <div class="col-span-1 flex flex-col justify-center text-lg font-extrabold text-gray-300 bg-gray-900">
        <p class="text-vertical">PAYMENT</p>
      </div>
      <div
        class="col-span-5 flex flex-col p-4 ml-[-1px] pl-5 justify-center text-semibold bg-gray-700 rounded-r-4xl text-white">
        <span>{{ payment.bank }}</span>
        <address>{{ payment.address }}</address>
        <span>{{ payment.bic }}</span>
        <span>{{ payment.routing }}</span>
        <span>{{ payment.name }}</span>
        <span>{{ payment.iban }}</span>
      </div>
      <!-- <div class="col-span-1 flex flex-col justify-center text-lg font-extrabold text-primary-500 border-t-2"> -->
      <!-- </div> -->
      <div class="col-span-4 flex flex-col justify-between border-2 m-4 rounded-xl border-primary-500 p-4 mr-4">
        <p class="font-extrabold text-primary-500 text-center">TOTAL</p>
        <div class="flex flex-row justify-between">
          <p>
            Subtotal
          </p>
          <p>
            {{ calculated_subtotal }}{{ currency }}
          </p>
        </div>
        <div class="flex flex-row justify-between">
          <p>
            Tax ({{ tax.rate }}%)
          </p>
          <p>
            {% set calculated_tax = calculated_subtotal * tax.rate / 100 %}
            {{ calculated_tax }}{{currency}}
          </p>
        </div>
        <div class="flex flex-row justify-between font-bold text-xl">
          <p>
            Total
          </p>
          <p>
            {% set calculated_total = calculated_subtotal + calculated_tax %}
            {{ calculated_total }}{{ currency }}
          </p>
        </div>
      </div>
      <div class="col-span-2"></div>
    </section>
    <section id="footer" class="grid grid-cols-12">
      <div class="col-span-1 flex flex-col justify-center text-lg font-extrabold text-gray-300">
        <p class="text-vertical">NOTES</p>
      </div>
      <div class="col-span-5 flex flex-col p-4">
        <span>{{ content }}</span>
      </div>
      <div class="col-span-4 flex flex-col justify-end text-center p-4 pb-0 border-b-2 text-xs text-gray-300">
        <p>SIGNATURE</p>
      </div>
    </section>
  </div>
</body>

</html>
